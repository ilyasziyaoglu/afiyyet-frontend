<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="row m-3 d-flex justify-content-between">
                <h1 class="text-center my-auto">{{tableService.getCurrentTable()?.groupName}} / {{tableService.getCurrentTable()?.name}}</h1>
            <div class="row">
                <div><button class="btn btn-lg btn-primary m-1" (click)="onAddOrder()">Sipariş Ekle</button></div>
                <div><button class="btn btn-lg btn-danger m-1">Kapat</button></div>
            </div>
            </div>
            <hr class="my-3">
            <h1 class="text-center mt-3">Siparişler</h1>
            <div class="row w-100">
                <form class="w-100" [formGroup]="addOrderForm">
                    <mat-form-field appearance="outline" class="w-25">
                        <mat-label>Ürün</mat-label>
                        <input type="text"
                               placeholder="Bir ürün seçiniz"
                               aria-label="Ürün"
                               matInput
                               formControlName="product"
                               [matAutocomplete]="auto">
                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                            <mat-option *ngFor="let product of filteredProducts | async" [value]="product">
                                {{product.name}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="ml-3">
                        <mat-label>Miktar</mat-label>
                        <input matInput type="number" min="0" formControlName="product" placeholder="Miktar">
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="ml-3">
                        <mat-label>Porsiyon</mat-label>
                        <mat-select formControlName="portion">
                            <mat-option value="1">1</mat-option>
                            <mat-option value="1.5">1,5</mat-option>
                            <mat-option value="2">2</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="ml-3">
                        <mat-label>Not</mat-label>
                        <input matInput type="text" formControlName="comment" placeholder="Not">
                    </mat-form-field>
                    <button type="submit" class="ml-3 my-0 btn btn-lg btn-primary" (click)="onAddOrder()">Ekle</button>
                </form>
            </div>
            <div class="row w-100 border rounded">
                <table mat-table [dataSource]="orderItems" class="w-100">

                    <!--- Note that these columns can be defined in any order.
                          The actual rendered columns are set as a property on the row definition" -->

                    <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef> No. </th>
                        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                    </ng-container>

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.product.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef class="text-center"> Miktar </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.amount}} </td>
                    </ng-container>

                    <ng-container matColumnDef="portion">
                        <th mat-header-cell *matHeaderCellDef class="text-center"> Porsiyon </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.portion}} </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef class="text-center"> Birim Fiyat </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.product.price}} </td>
                    </ng-container>

                    <ng-container matColumnDef="totalPrice">
                        <th mat-header-cell *matHeaderCellDef class="text-center"> Toplam Fiyat </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.product.price * element.amount}} </td>
                    </ng-container>

                    <ng-container matColumnDef="comment">
                        <th mat-header-cell *matHeaderCellDef> Not </th>
                        <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>
        </div>
    </div>
</div>
